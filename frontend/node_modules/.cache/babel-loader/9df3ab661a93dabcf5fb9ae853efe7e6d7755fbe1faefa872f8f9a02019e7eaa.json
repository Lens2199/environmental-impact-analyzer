{"ast":null,"code":"var _jsxFileName = \"/Users/deocherisme/environmental-impact-analyzer/frontend/src/pages/ProductDetailPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Box, Container, Typography, Button, Grid, Paper, Chip, Divider, CircularProgress, Alert, List, ListItem, ListItemIcon, ListItemText, Card, CardContent, Tabs, Tab, Breadcrumbs, Link as MuiLink } from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport EcoIcon from '../components/icons/EcoIcon';\nimport PlaceIcon from '@mui/icons-material/Place';\nimport CategoryIcon from '@mui/icons-material/Category';\nimport ConstructionIcon from '@mui/icons-material/Construction';\nimport AnalyticsIcon from '@mui/icons-material/Analytics';\nimport CompareArrowsIcon from '@mui/icons-material/CompareArrows';\nimport InfoIcon from '@mui/icons-material/Info';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\nimport { productAPI, analysisAPI } from '../services/api';\nimport LoadingState from '../components/common/LoadingState';\nimport ErrorState from '../components/common/ErrorState';\nimport { formatDate } from '../utils/helpers';\n\n// Import product images\nimport ecoPhoneImage from '../assets/pic/Eco-Friendly Smartphone.jpg';\nimport organicShirtImage from '../assets/pic/Organic Cotton T-Shirt.jpg';\nimport bambooUtensilsImage from '../assets/pic/Bamboo Kitchen Utensils.jpg';\nimport solarPowerBankImage from '../assets/pic/Solar-Powered Power Bank.jpg';\nimport ecoDetergentImage from '../assets/pic/Plant-Based Laundry Detergent.jpg';\nimport recycledNotebookImage from '../assets/pic/Recycled Paper Notebook.jpg';\n\n// Generate colorful placeholders if images fail to load\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst generateColorfulPlaceholder = productName => {\n  // Generate a color based on the product name (for consistent colors per product)\n  const getColor = str => {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    const c = (hash & 0x00FFFFFF).toString(16).toUpperCase();\n    return '#' + '00000'.substring(0, 6 - c.length) + c;\n  };\n\n  // Calculate brightness to determine if text should be black or white\n  const getBrightness = hexColor => {\n    // Remove the # if present\n    hexColor = hexColor.replace('#', '');\n\n    // Convert to RGB\n    const r = parseInt(hexColor.substr(0, 2), 16);\n    const g = parseInt(hexColor.substr(2, 2), 16);\n    const b = parseInt(hexColor.substr(4, 2), 16);\n\n    // Calculate brightness (HSP formula)\n    return Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b));\n  };\n\n  // Create an SVG rectangle with the product name\n  const color = getColor(productName);\n  const textColor = getBrightness(color) > 160 ? '#000000' : '#FFFFFF';\n  const svgContent = `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"300\" height=\"200\" viewBox=\"0 0 300 200\">\n      <rect width=\"300\" height=\"200\" fill=\"${color}\" />\n      <text x=\"150\" y=\"100\" font-family=\"Arial, sans-serif\" font-size=\"18\" text-anchor=\"middle\" fill=\"${textColor}\">${productName}</text>\n    </svg>\n  `;\n  return `data:image/svg+xml;base64,${btoa(svgContent)}`;\n};\n\n// Function to get the correct product image based on ID\nconst getProductImage = id => {\n  switch (id) {\n    case '1':\n      return ecoPhoneImage;\n    case '2':\n      return organicShirtImage;\n    case '3':\n      return bambooUtensilsImage;\n    case '4':\n      return solarPowerBankImage;\n    case '5':\n      return ecoDetergentImage;\n    case '6':\n      return recycledNotebookImage;\n    default:\n      return null;\n  }\n};\n\n// Component to display individual score\nconst ScoreCircle = ({\n  score,\n  label,\n  size = 'medium'\n}) => {\n  let scoreClass = '';\n  if (score >= 9) scoreClass = 'score-excellent';else if (score >= 7) scoreClass = 'score-good';else if (score >= 5) scoreClass = 'score-average';else if (score >= 3) scoreClass = 'score-poor';else scoreClass = 'score-bad';\n  const circleSize = size === 'large' ? 100 : size === 'medium' ? 60 : 40;\n  const fontSize = size === 'large' ? '2rem' : size === 'medium' ? '1.25rem' : '1rem';\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      textAlign: 'center'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      className: `analysis-score-circle ${scoreClass}`,\n      sx: {\n        width: circleSize,\n        height: circleSize,\n        fontSize,\n        mb: 1,\n        mx: 'auto'\n      },\n      children: score\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      variant: size === 'small' ? 'body2' : 'body1',\n      component: \"div\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n\n// Mock similar products for the category\n_c = ScoreCircle;\nconst getSimilarProducts = category => {\n  return [{\n    id: 'similar1',\n    name: 'Similar Product 1',\n    category: category,\n    description: 'Another eco-friendly product in the same category.',\n    materials: ['Sustainable Material 1', 'Sustainable Material 2'],\n    manufacturingLocation: 'Canada'\n  }, {\n    id: 'similar2',\n    name: 'Similar Product 2',\n    category: category,\n    description: 'Another alternative with different materials.',\n    materials: ['Recycled Material', 'Biodegradable Components'],\n    manufacturingLocation: 'Finland'\n  }, {\n    id: 'similar3',\n    name: 'Similar Product 3',\n    category: category,\n    description: 'A third option for environmentally conscious consumers.',\n    materials: ['Organic Components', 'Renewable Resource'],\n    manufacturingLocation: 'Sweden'\n  }];\n};\nfunction ProductDetailPage() {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n\n  // State variables\n  const [product, setProduct] = useState(null);\n  const [analysis, setAnalysis] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [analyzing, setAnalyzing] = useState(false);\n  const [analysisError, setAnalysisError] = useState('');\n  const [activeTab, setActiveTab] = useState(0);\n  const [similarProducts, setSimilarProducts] = useState([]);\n\n  // Fetch product data\n  useEffect(() => {\n    const fetchProductData = async () => {\n      setLoading(true);\n      setError('');\n      try {\n        const response = await productAPI.getProductById(id);\n        setProduct(response.data);\n        // Initialize similar products based on the category\n        if (response.data && response.data.category) {\n          setSimilarProducts(getSimilarProducts(response.data.category));\n        }\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching product:', err);\n        setError(err.message || 'Failed to load product details. Please try again.');\n        setLoading(false);\n\n        // If we're in development mode, create mock data for display\n        if (process.env.NODE_ENV === 'development' || process.env.REACT_APP_USE_MOCK_DATA === 'true') {\n          const mockProduct = {\n            id: id,\n            name: id === '2' ? 'Organic Cotton T-Shirt' : `Product ${id}`,\n            category: 'Clothing',\n            description: 'Made with 100% organic cotton grown without harmful pesticides or synthetic fertilizers.',\n            materials: ['Organic Cotton'],\n            manufacturing_location: 'Portugal',\n            image_url: id === '2' ? organicShirtImage : null\n          };\n          setProduct(mockProduct);\n          setSimilarProducts(getSimilarProducts('Clothing'));\n          setLoading(false);\n          setError(''); // Clear error since we have fallback data\n        }\n      }\n    };\n    fetchProductData();\n  }, [id]);\n\n  // Fetch latest analysis if it exists\n  useEffect(() => {\n    const fetchAnalysis = async () => {\n      try {\n        const response = await analysisAPI.getProductAnalysis(id);\n        setAnalysis(response.data);\n      } catch (err) {\n        // Analysis might not exist yet, which is fine\n        console.log('No existing analysis found');\n\n        // In development, create mock analysis data\n        if (process.env.NODE_ENV === 'development' || process.env.REACT_APP_USE_MOCK_DATA === 'true') {\n          setAnalysis({\n            productId: id,\n            scores: {\n              overall: 8.5,\n              carbon: 8.2,\n              water: 9.0,\n              resources: 8.3\n            },\n            explanation: 'This product uses environmentally sustainable materials and manufacturing processes, resulting in a lower carbon footprint compared to conventional alternatives.',\n            suggestions: '1. Consider recyclable packaging options.\\n2. Explore carbon-neutral shipping methods.\\n3. Implement a take-back program for end-of-life recycling.',\n            createdAt: new Date().toISOString()\n          });\n        }\n      }\n    };\n    if (!loading && product) {\n      fetchAnalysis();\n    }\n  }, [id, product, loading]);\n\n  // Handle tab change\n  const handleTabChange = (event, newValue) => {\n    setActiveTab(newValue);\n  };\n\n  // Analyze product\n  const handleAnalyzeProduct = async () => {\n    setAnalyzing(true);\n    setAnalysisError('');\n    try {\n      const response = await analysisAPI.analyzeExistingProduct(id, true);\n      setAnalysis(response.data);\n      setAnalyzing(false);\n    } catch (err) {\n      console.error('Error analyzing product:', err);\n      setAnalysisError(err.message || 'Failed to analyze product. Please try again.');\n\n      // In development, create mock analysis data\n      if (process.env.NODE_ENV === 'development' || process.env.REACT_APP_USE_MOCK_DATA === 'true') {\n        // Simulate some delay for realistic experience\n        setTimeout(() => {\n          setAnalysis({\n            productId: id,\n            scores: {\n              overall: 8.5,\n              carbon: 8.2,\n              water: 9.0,\n              resources: 8.3\n            },\n            explanation: 'This product uses environmentally sustainable materials and manufacturing processes, resulting in a lower carbon footprint compared to conventional alternatives.',\n            suggestions: '1. Consider recyclable packaging options.\\n2. Explore carbon-neutral shipping methods.\\n3. Implement a take-back program for end-of-life recycling.',\n            createdAt: new Date().toISOString()\n          });\n          setAnalyzing(false);\n          setAnalysisError(''); // Clear error since we have fallback data\n        }, 2000);\n      } else {\n        setAnalyzing(false);\n      }\n    }\n  };\n\n  // Loading state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingState, {\n      message: \"Loading product details...\",\n      fullPage: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Error state\n  if (error && !product) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"md\",\n      sx: {\n        py: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(ErrorState, {\n        error: error,\n        fullPage: true,\n        onRetry: () => window.location.reload()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 3,\n          textAlign: 'center'\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          startIcon: /*#__PURE__*/_jsxDEV(NavigateNextIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 24\n          }, this),\n          onClick: () => navigate('/search'),\n          children: \"Back to Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Box, {\n    className: \"page-transition\",\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      maxWidth: \"lg\",\n      sx: {\n        py: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Breadcrumbs, {\n        separator: /*#__PURE__*/_jsxDEV(NavigateNextIcon, {\n          fontSize: \"small\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 22\n        }, this),\n        \"aria-label\": \"breadcrumb\",\n        sx: {\n          mb: 3\n        },\n        children: [/*#__PURE__*/_jsxDEV(MuiLink, {\n          component: Link,\n          to: \"/\",\n          color: \"inherit\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MuiLink, {\n          component: Link,\n          to: \"/search\",\n          color: \"inherit\",\n          children: \"Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MuiLink, {\n          component: Link,\n          to: `/search?category=${product.category}`,\n          color: \"inherit\",\n          children: product.category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"text.primary\",\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 4,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 5,\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 2,\n            sx: {\n              height: '100%',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              overflow: 'hidden',\n              borderRadius: 2\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: getProductImage(id) || product.image_url,\n              alt: product.name,\n              style: {\n                width: '100%',\n                height: 'auto'\n              },\n              onError: e => {\n                console.error(`Failed to load image for: ${product.name}`);\n                e.target.src = generateColorfulPlaceholder(product.name);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          md: 7,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            component: \"h1\",\n            gutterBottom: true,\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(CategoryIcon, {\n              sx: {\n                color: 'primary.main',\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: product.category,\n              size: \"medium\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              mb: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(PlaceIcon, {\n              sx: {\n                color: 'primary.main',\n                mr: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              children: [\"Made in \", product.manufacturing_location || product.manufacturingLocation || 'Not specified']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            gutterBottom: true,\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            paragraph: true,\n            children: product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            gutterBottom: true,\n            children: \"Materials\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              flexWrap: 'wrap',\n              gap: 1,\n              mb: 3\n            },\n            children: (product.materials || []).map((material, index) => /*#__PURE__*/_jsxDEV(Chip, {\n              label: material,\n              size: \"small\",\n              variant: \"outlined\",\n              icon: /*#__PURE__*/_jsxDEV(ConstructionIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 25\n              }, this)\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 13\n          }, this), product.additional_details && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              gutterBottom: true,\n              children: \"Additional Details\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              paragraph: true,\n              children: product.additional_details\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              gap: 2,\n              mt: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              variant: \"contained\",\n              color: \"primary\",\n              startIcon: /*#__PURE__*/_jsxDEV(AnalyticsIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 430,\n                columnNumber: 28\n              }, this),\n              onClick: handleAnalyzeProduct,\n              disabled: analyzing,\n              children: analyzing ? 'Analyzing...' : analysis ? 'Re-Analyze' : 'Analyze Impact'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              startIcon: /*#__PURE__*/_jsxDEV(CompareArrowsIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 28\n              }, this),\n              onClick: () => navigate(`/compare?products=${id}`),\n              children: \"Compare\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outlined\",\n              color: \"secondary\",\n              onClick: () => navigate(`/products/${id}/edit`),\n              children: \"Edit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), analysisError && /*#__PURE__*/_jsxDEV(Alert, {\n            severity: \"error\",\n            sx: {\n              mt: 2\n            },\n            children: analysisError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), (analysis || analyzing) && /*#__PURE__*/_jsxDEV(Paper, {\n        elevation: 3,\n        sx: {\n          mt: 6,\n          mb: 4,\n          borderRadius: 2,\n          overflow: 'hidden'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            px: 3,\n            py: 2,\n            backgroundColor: 'primary.main',\n            color: 'white'\n          },\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"Environmental Impact Analysis\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 13\n        }, this), analyzing ? /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            p: 4,\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 60\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            sx: {\n              mt: 2\n            },\n            children: \"Analyzing Environmental Impact...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            color: \"text.secondary\",\n            sx: {\n              mt: 1\n            },\n            children: \"This may take a few moments as our AI evaluates the product details.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            p: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(Tabs, {\n            value: activeTab,\n            onChange: handleTabChange,\n            centered: true,\n            sx: {\n              mb: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Tab, {\n              icon: /*#__PURE__*/_jsxDEV(AnalyticsIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 30\n              }, this),\n              label: \"SCORES\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Tab, {\n              icon: /*#__PURE__*/_jsxDEV(InfoIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 30\n              }, this),\n              label: \"DETAILS\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 481,\n            columnNumber: 17\n          }, this), activeTab === 0 && /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                textAlign: 'center',\n                mb: 4\n              },\n              children: [/*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                gutterBottom: true,\n                children: \"Overall Environmental Score\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(ScoreCircle, {\n                score: analysis.scores.overall,\n                label: \"Overall\",\n                size: \"large\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {\n              sx: {\n                my: 3\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 505,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 4,\n              sx: {\n                mt: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 4,\n                children: /*#__PURE__*/_jsxDEV(ScoreCircle, {\n                  score: analysis.scores.carbon,\n                  label: \"Carbon Footprint\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 510,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 509,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 4,\n                children: /*#__PURE__*/_jsxDEV(ScoreCircle, {\n                  score: analysis.scores.water,\n                  label: \"Water Usage\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 516,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 515,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 12,\n                md: 4,\n                children: /*#__PURE__*/_jsxDEV(ScoreCircle, {\n                  score: analysis.scores.resources,\n                  label: \"Resource Consumption\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 522,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 521,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 19\n          }, this), activeTab === 1 && /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Card, {\n              variant: \"outlined\",\n              sx: {\n                mb: 3\n              },\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Analysis Explanation\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 535,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"body1\",\n                  children: analysis.explanation\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 538,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 534,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 533,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Card, {\n              variant: \"outlined\",\n              children: /*#__PURE__*/_jsxDEV(CardContent, {\n                children: [/*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  gutterBottom: true,\n                  children: \"Improvement Suggestions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 546,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(List, {\n                  children: analysis.suggestions.split(/\\d+\\./).filter(s => s.trim()).map((suggestion, index) => /*#__PURE__*/_jsxDEV(ListItem, {\n                    children: [/*#__PURE__*/_jsxDEV(ListItemIcon, {\n                      children: /*#__PURE__*/_jsxDEV(EcoIcon, {\n                        color: \"primary\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 553,\n                        columnNumber: 33\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 552,\n                      columnNumber: 31\n                    }, this), /*#__PURE__*/_jsxDEV(ListItemText, {\n                      primary: suggestion.trim()\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 555,\n                      columnNumber: 31\n                    }, this)]\n                  }, index, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 551,\n                    columnNumber: 29\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 549,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 544,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 3,\n                textAlign: 'right'\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                color: \"text.secondary\",\n                children: [\"Analysis performed: \", formatDate(analysis.createdAt)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 562,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 532,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 480,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          mt: 6,\n          mb: 4\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h5\",\n          gutterBottom: true,\n          children: \"Similar Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          paragraph: true,\n          color: \"text.secondary\",\n          children: \"Compare with other products in the same category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 579,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          container: true,\n          spacing: 3,\n          children: similarProducts.map((similarProduct, index) => {\n            const num = index + 1;\n            return /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 12,\n              sm: 6,\n              md: 4,\n              children: /*#__PURE__*/_jsxDEV(Paper, {\n                elevation: 2,\n                sx: {\n                  p: 2,\n                  display: 'flex',\n                  flexDirection: 'column',\n                  alignItems: 'center',\n                  cursor: 'pointer',\n                  transition: 'transform 0.3s ease, box-shadow 0.3s ease',\n                  '&:hover': {\n                    transform: 'translateY(-5px)',\n                    boxShadow: 4\n                  }\n                },\n                onClick: () => navigate(`/search?category=${product.category}`),\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `https://via.placeholder.com/300x200?text=Similar+Product+${num}`,\n                  alt: similarProduct.name,\n                  style: {\n                    width: '100%',\n                    height: 'auto',\n                    marginBottom: '12px'\n                  },\n                  onError: e => {\n                    console.error(`Failed to load image for: ${similarProduct.name}`);\n                    e.target.src = generateColorfulPlaceholder(similarProduct.name);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                  variant: \"h6\",\n                  align: \"center\",\n                  children: similarProduct.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 613,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Chip, {\n                  label: similarProduct.category,\n                  size: \"small\",\n                  sx: {\n                    mt: 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 616,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  variant: \"text\",\n                  color: \"primary\",\n                  startIcon: /*#__PURE__*/_jsxDEV(CompareArrowsIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 624,\n                    columnNumber: 34\n                  }, this),\n                  sx: {\n                    mt: 2\n                  },\n                  onClick: e => {\n                    e.stopPropagation();\n                    navigate(`/compare?products=${id},${similarProduct.id}`);\n                  },\n                  children: \"Compare\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 621,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 19\n              }, this)\n            }, similarProduct.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 587,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 583,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 328,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductDetailPage, \"b0FNC8NJNUal/2WywSpO6Y9LBO4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c2 = ProductDetailPage;\nexport default ProductDetailPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"ScoreCircle\");\n$RefreshReg$(_c2, \"ProductDetailPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Box","Container","Typography","Button","Grid","Paper","Chip","Divider","CircularProgress","Alert","List","ListItem","ListItemIcon","ListItemText","Card","CardContent","Tabs","Tab","Breadcrumbs","Link","MuiLink","EcoIcon","PlaceIcon","CategoryIcon","ConstructionIcon","AnalyticsIcon","CompareArrowsIcon","InfoIcon","NavigateNextIcon","productAPI","analysisAPI","LoadingState","ErrorState","formatDate","ecoPhoneImage","organicShirtImage","bambooUtensilsImage","solarPowerBankImage","ecoDetergentImage","recycledNotebookImage","jsxDEV","_jsxDEV","Fragment","_Fragment","generateColorfulPlaceholder","productName","getColor","str","hash","i","length","charCodeAt","c","toString","toUpperCase","substring","getBrightness","hexColor","replace","r","parseInt","substr","g","b","Math","sqrt","color","textColor","svgContent","btoa","getProductImage","id","ScoreCircle","score","label","size","scoreClass","circleSize","fontSize","sx","textAlign","children","className","width","height","mb","mx","fileName","_jsxFileName","lineNumber","columnNumber","variant","component","_c","getSimilarProducts","category","name","description","materials","manufacturingLocation","ProductDetailPage","_s","navigate","product","setProduct","analysis","setAnalysis","loading","setLoading","error","setError","analyzing","setAnalyzing","analysisError","setAnalysisError","activeTab","setActiveTab","similarProducts","setSimilarProducts","fetchProductData","response","getProductById","data","err","console","message","process","env","NODE_ENV","REACT_APP_USE_MOCK_DATA","mockProduct","manufacturing_location","image_url","fetchAnalysis","getProductAnalysis","log","productId","scores","overall","carbon","water","resources","explanation","suggestions","createdAt","Date","toISOString","handleTabChange","event","newValue","handleAnalyzeProduct","analyzeExistingProduct","setTimeout","fullPage","maxWidth","py","onRetry","window","location","reload","mt","startIcon","onClick","separator","to","container","spacing","item","xs","md","elevation","display","justifyContent","alignItems","overflow","borderRadius","src","alt","style","onError","e","target","gutterBottom","mr","paragraph","flexWrap","gap","map","material","index","icon","additional_details","disabled","severity","px","backgroundColor","p","value","onChange","centered","my","split","filter","s","trim","suggestion","primary","similarProduct","num","sm","flexDirection","cursor","transition","transform","boxShadow","marginBottom","align","stopPropagation","_c2","$RefreshReg$"],"sources":["/Users/deocherisme/environmental-impact-analyzer/frontend/src/pages/ProductDetailPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  Box,\n  Container,\n  Typography,\n  Button,\n  Grid,\n  Paper,\n  Chip,\n  Divider,\n  CircularProgress,\n  Alert,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Card,\n  CardContent,\n  Tabs,\n  Tab,\n  Breadcrumbs,\n  Link as MuiLink\n} from '@mui/material';\nimport { Link } from 'react-router-dom';\nimport EcoIcon from '../components/icons/EcoIcon';\nimport PlaceIcon from '@mui/icons-material/Place';\nimport CategoryIcon from '@mui/icons-material/Category';\nimport ConstructionIcon from '@mui/icons-material/Construction';\nimport AnalyticsIcon from '@mui/icons-material/Analytics';\nimport CompareArrowsIcon from '@mui/icons-material/CompareArrows';\nimport InfoIcon from '@mui/icons-material/Info';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\nimport { productAPI, analysisAPI } from '../services/api';\nimport LoadingState from '../components/common/LoadingState';\nimport ErrorState from '../components/common/ErrorState';\nimport { formatDate } from '../utils/helpers';\n\n// Import product images\nimport ecoPhoneImage from '../assets/pic/Eco-Friendly Smartphone.jpg';\nimport organicShirtImage from '../assets/pic/Organic Cotton T-Shirt.jpg';\nimport bambooUtensilsImage from '../assets/pic/Bamboo Kitchen Utensils.jpg';\nimport solarPowerBankImage from '../assets/pic/Solar-Powered Power Bank.jpg';\nimport ecoDetergentImage from '../assets/pic/Plant-Based Laundry Detergent.jpg';\nimport recycledNotebookImage from '../assets/pic/Recycled Paper Notebook.jpg';\n\n// Generate colorful placeholders if images fail to load\nconst generateColorfulPlaceholder = (productName) => {\n  // Generate a color based on the product name (for consistent colors per product)\n  const getColor = (str) => {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\n    }\n    const c = (hash & 0x00FFFFFF).toString(16).toUpperCase();\n    return '#' + '00000'.substring(0, 6 - c.length) + c;\n  };\n  \n  // Calculate brightness to determine if text should be black or white\n  const getBrightness = (hexColor) => {\n    // Remove the # if present\n    hexColor = hexColor.replace('#', '');\n    \n    // Convert to RGB\n    const r = parseInt(hexColor.substr(0, 2), 16);\n    const g = parseInt(hexColor.substr(2, 2), 16);\n    const b = parseInt(hexColor.substr(4, 2), 16);\n    \n    // Calculate brightness (HSP formula)\n    return Math.sqrt(\n      0.299 * (r * r) +\n      0.587 * (g * g) +\n      0.114 * (b * b)\n    );\n  };\n  \n  // Create an SVG rectangle with the product name\n  const color = getColor(productName);\n  const textColor = getBrightness(color) > 160 ? '#000000' : '#FFFFFF';\n  \n  const svgContent = `\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"300\" height=\"200\" viewBox=\"0 0 300 200\">\n      <rect width=\"300\" height=\"200\" fill=\"${color}\" />\n      <text x=\"150\" y=\"100\" font-family=\"Arial, sans-serif\" font-size=\"18\" text-anchor=\"middle\" fill=\"${textColor}\">${productName}</text>\n    </svg>\n  `;\n  \n  return `data:image/svg+xml;base64,${btoa(svgContent)}`;\n};\n\n// Function to get the correct product image based on ID\nconst getProductImage = (id) => {\n  switch(id) {\n    case '1': return ecoPhoneImage;\n    case '2': return organicShirtImage;\n    case '3': return bambooUtensilsImage;\n    case '4': return solarPowerBankImage;\n    case '5': return ecoDetergentImage;\n    case '6': return recycledNotebookImage;\n    default: return null;\n  }\n};\n\n// Component to display individual score\nconst ScoreCircle = ({ score, label, size = 'medium' }) => {\n  let scoreClass = '';\n  \n  if (score >= 9) scoreClass = 'score-excellent';\n  else if (score >= 7) scoreClass = 'score-good';\n  else if (score >= 5) scoreClass = 'score-average';\n  else if (score >= 3) scoreClass = 'score-poor';\n  else scoreClass = 'score-bad';\n  \n  const circleSize = size === 'large' ? 100 : size === 'medium' ? 60 : 40;\n  const fontSize = size === 'large' ? '2rem' : size === 'medium' ? '1.25rem' : '1rem';\n  \n  return (\n    <Box sx={{ textAlign: 'center' }}>\n      <Box \n        className={`analysis-score-circle ${scoreClass}`}\n        sx={{ \n          width: circleSize, \n          height: circleSize, \n          fontSize, \n          mb: 1,\n          mx: 'auto'\n        }}\n      >\n        {score}\n      </Box>\n      <Typography variant={size === 'small' ? 'body2' : 'body1'} component=\"div\">\n        {label}\n      </Typography>\n    </Box>\n  );\n};\n\n// Mock similar products for the category\nconst getSimilarProducts = (category) => {\n  return [\n    {\n      id: 'similar1',\n      name: 'Similar Product 1',\n      category: category,\n      description: 'Another eco-friendly product in the same category.',\n      materials: ['Sustainable Material 1', 'Sustainable Material 2'],\n      manufacturingLocation: 'Canada'\n    },\n    {\n      id: 'similar2',\n      name: 'Similar Product 2',\n      category: category,\n      description: 'Another alternative with different materials.',\n      materials: ['Recycled Material', 'Biodegradable Components'],\n      manufacturingLocation: 'Finland'\n    },\n    {\n      id: 'similar3',\n      name: 'Similar Product 3',\n      category: category,\n      description: 'A third option for environmentally conscious consumers.',\n      materials: ['Organic Components', 'Renewable Resource'],\n      manufacturingLocation: 'Sweden'\n    }\n  ];\n};\n\nfunction ProductDetailPage() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  \n  // State variables\n  const [product, setProduct] = useState(null);\n  const [analysis, setAnalysis] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [analyzing, setAnalyzing] = useState(false);\n  const [analysisError, setAnalysisError] = useState('');\n  const [activeTab, setActiveTab] = useState(0);\n  const [similarProducts, setSimilarProducts] = useState([]);\n  \n  // Fetch product data\n  useEffect(() => {\n    const fetchProductData = async () => {\n      setLoading(true);\n      setError('');\n      \n      try {\n        const response = await productAPI.getProductById(id);\n        setProduct(response.data);\n        // Initialize similar products based on the category\n        if (response.data && response.data.category) {\n          setSimilarProducts(getSimilarProducts(response.data.category));\n        }\n        setLoading(false);\n      } catch (err) {\n        console.error('Error fetching product:', err);\n        setError(err.message || 'Failed to load product details. Please try again.');\n        setLoading(false);\n        \n        // If we're in development mode, create mock data for display\n        if (process.env.NODE_ENV === 'development' || process.env.REACT_APP_USE_MOCK_DATA === 'true') {\n          const mockProduct = {\n            id: id,\n            name: id === '2' ? 'Organic Cotton T-Shirt' : `Product ${id}`,\n            category: 'Clothing',\n            description: 'Made with 100% organic cotton grown without harmful pesticides or synthetic fertilizers.',\n            materials: ['Organic Cotton'],\n            manufacturing_location: 'Portugal',\n            image_url: id === '2' ? organicShirtImage : null\n          };\n          \n          setProduct(mockProduct);\n          setSimilarProducts(getSimilarProducts('Clothing'));\n          setLoading(false);\n          setError(''); // Clear error since we have fallback data\n        }\n      }\n    };\n    \n    fetchProductData();\n  }, [id]);\n  \n  // Fetch latest analysis if it exists\n  useEffect(() => {\n    const fetchAnalysis = async () => {\n      try {\n        const response = await analysisAPI.getProductAnalysis(id);\n        setAnalysis(response.data);\n      } catch (err) {\n        // Analysis might not exist yet, which is fine\n        console.log('No existing analysis found');\n        \n        // In development, create mock analysis data\n        if (process.env.NODE_ENV === 'development' || process.env.REACT_APP_USE_MOCK_DATA === 'true') {\n          setAnalysis({\n            productId: id,\n            scores: {\n              overall: 8.5,\n              carbon: 8.2,\n              water: 9.0,\n              resources: 8.3\n            },\n            explanation: 'This product uses environmentally sustainable materials and manufacturing processes, resulting in a lower carbon footprint compared to conventional alternatives.',\n            suggestions: '1. Consider recyclable packaging options.\\n2. Explore carbon-neutral shipping methods.\\n3. Implement a take-back program for end-of-life recycling.',\n            createdAt: new Date().toISOString()\n          });\n        }\n      }\n    };\n    \n    if (!loading && product) {\n      fetchAnalysis();\n    }\n  }, [id, product, loading]);\n  \n  // Handle tab change\n  const handleTabChange = (event, newValue) => {\n    setActiveTab(newValue);\n  };\n  \n  // Analyze product\n  const handleAnalyzeProduct = async () => {\n    setAnalyzing(true);\n    setAnalysisError('');\n    \n    try {\n      const response = await analysisAPI.analyzeExistingProduct(id, true);\n      setAnalysis(response.data);\n      setAnalyzing(false);\n    } catch (err) {\n      console.error('Error analyzing product:', err);\n      setAnalysisError(err.message || 'Failed to analyze product. Please try again.');\n      \n      // In development, create mock analysis data\n      if (process.env.NODE_ENV === 'development' || process.env.REACT_APP_USE_MOCK_DATA === 'true') {\n        // Simulate some delay for realistic experience\n        setTimeout(() => {\n          setAnalysis({\n            productId: id,\n            scores: {\n              overall: 8.5,\n              carbon: 8.2,\n              water: 9.0,\n              resources: 8.3\n            },\n            explanation: 'This product uses environmentally sustainable materials and manufacturing processes, resulting in a lower carbon footprint compared to conventional alternatives.',\n            suggestions: '1. Consider recyclable packaging options.\\n2. Explore carbon-neutral shipping methods.\\n3. Implement a take-back program for end-of-life recycling.',\n            createdAt: new Date().toISOString()\n          });\n          setAnalyzing(false);\n          setAnalysisError(''); // Clear error since we have fallback data\n        }, 2000);\n      } else {\n        setAnalyzing(false);\n      }\n    }\n  };\n  \n  // Loading state\n  if (loading) {\n    return <LoadingState message=\"Loading product details...\" fullPage />;\n  }\n  \n  // Error state\n  if (error && !product) {\n    return (\n      <Container maxWidth=\"md\" sx={{ py: 8 }}>\n        <ErrorState \n          error={error} \n          fullPage \n          onRetry={() => window.location.reload()}\n        />\n        <Box sx={{ mt: 3, textAlign: 'center' }}>\n          <Button\n            variant=\"contained\"\n            startIcon={<NavigateNextIcon />}\n            onClick={() => navigate('/search')}\n          >\n            Back to Search\n          </Button>\n        </Box>\n      </Container>\n    );\n  }\n  \n  return (\n    <Box className=\"page-transition\">\n      <Container maxWidth=\"lg\" sx={{ py: 4 }}>\n        {/* Breadcrumbs */}\n        <Breadcrumbs \n          separator={<NavigateNextIcon fontSize=\"small\" />} \n          aria-label=\"breadcrumb\"\n          sx={{ mb: 3 }}\n        >\n          <MuiLink component={Link} to=\"/\" color=\"inherit\">\n            Home\n          </MuiLink>\n          <MuiLink component={Link} to=\"/search\" color=\"inherit\">\n            Products\n          </MuiLink>\n          <MuiLink component={Link} to={`/search?category=${product.category}`} color=\"inherit\">\n            {product.category}\n          </MuiLink>\n          <Typography color=\"text.primary\">{product.name}</Typography>\n        </Breadcrumbs>\n        \n        {/* Product Details */}\n        <Grid container spacing={4}>\n          {/* Product Image */}\n          <Grid item xs={12} md={5}>\n            <Paper \n              elevation={2} \n              sx={{ \n                height: '100%', \n                display: 'flex', \n                justifyContent: 'center', \n                alignItems: 'center',\n                overflow: 'hidden',\n                borderRadius: 2\n              }}\n            >\n              <img \n                src={getProductImage(id) || product.image_url} \n                alt={product.name} \n                style={{ width: '100%', height: 'auto' }} \n                onError={(e) => {\n                  console.error(`Failed to load image for: ${product.name}`);\n                  e.target.src = generateColorfulPlaceholder(product.name);\n                }}\n              />\n            </Paper>\n          </Grid>\n          \n          {/* Product Info */}\n          <Grid item xs={12} md={7}>\n            <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n              {product.name}\n            </Typography>\n            \n            <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n              <CategoryIcon sx={{ color: 'primary.main', mr: 1 }} />\n              <Chip label={product.category} size=\"medium\" />\n            </Box>\n            \n            <Box sx={{ display: 'flex', alignItems: 'center', mb: 3 }}>\n              <PlaceIcon sx={{ color: 'primary.main', mr: 1 }} />\n              <Typography variant=\"body1\">\n                Made in {product.manufacturing_location || product.manufacturingLocation || 'Not specified'}\n              </Typography>\n            </Box>\n            \n            <Typography variant=\"h6\" gutterBottom>\n              Description\n            </Typography>\n            <Typography variant=\"body1\" paragraph>\n              {product.description}\n            </Typography>\n            \n            <Typography variant=\"h6\" gutterBottom>\n              Materials\n            </Typography>\n            <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 1, mb: 3 }}>\n              {(product.materials || []).map((material, index) => (\n                <Chip \n                  key={index} \n                  label={material} \n                  size=\"small\" \n                  variant=\"outlined\" \n                  icon={<ConstructionIcon />} \n                />\n              ))}\n            </Box>\n            \n            {product.additional_details && (\n              <>\n                <Typography variant=\"h6\" gutterBottom>\n                  Additional Details\n                </Typography>\n                <Typography variant=\"body1\" paragraph>\n                  {product.additional_details}\n                </Typography>\n              </>\n            )}\n            \n            <Box sx={{ display: 'flex', gap: 2, mt: 3 }}>\n              <Button \n                variant=\"contained\" \n                color=\"primary\"\n                startIcon={<AnalyticsIcon />}\n                onClick={handleAnalyzeProduct}\n                disabled={analyzing}\n              >\n                {analyzing ? 'Analyzing...' : analysis ? 'Re-Analyze' : 'Analyze Impact'}\n              </Button>\n              <Button \n                variant=\"outlined\"\n                startIcon={<CompareArrowsIcon />}\n                onClick={() => navigate(`/compare?products=${id}`)}\n              >\n                Compare\n              </Button>\n              <Button \n                variant=\"outlined\"\n                color=\"secondary\"\n                onClick={() => navigate(`/products/${id}/edit`)}\n              >\n                Edit\n              </Button>\n            </Box>\n            \n            {analysisError && (\n              <Alert severity=\"error\" sx={{ mt: 2 }}>\n                {analysisError}\n              </Alert>\n            )}\n          </Grid>\n        </Grid>\n        \n        {/* Analysis Results */}\n        {(analysis || analyzing) && (\n          <Paper elevation={3} sx={{ mt: 6, mb: 4, borderRadius: 2, overflow: 'hidden' }}>\n            <Box sx={{ px: 3, py: 2, backgroundColor: 'primary.main', color: 'white' }}>\n              <Typography variant=\"h5\">\n                Environmental Impact Analysis\n              </Typography>\n            </Box>\n            \n            {analyzing ? (\n              <Box sx={{ p: 4, textAlign: 'center' }}>\n                <CircularProgress size={60} />\n                <Typography variant=\"h6\" sx={{ mt: 2 }}>\n                  Analyzing Environmental Impact...\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                  This may take a few moments as our AI evaluates the product details.\n                </Typography>\n              </Box>\n            ) : (\n              <Box sx={{ p: 3 }}>\n                <Tabs \n                  value={activeTab} \n                  onChange={handleTabChange} \n                  centered\n                  sx={{ mb: 3 }}\n                >\n                  <Tab icon={<AnalyticsIcon />} label=\"SCORES\" />\n                  <Tab icon={<InfoIcon />} label=\"DETAILS\" />\n                </Tabs>\n                \n                {activeTab === 0 && (\n                  <Box>\n                    {/* Overall Score */}\n                    <Box sx={{ textAlign: 'center', mb: 4 }}>\n                      <Typography variant=\"h5\" gutterBottom>\n                        Overall Environmental Score\n                      </Typography>\n                      <ScoreCircle \n                        score={analysis.scores.overall} \n                        label=\"Overall\" \n                        size=\"large\" \n                      />\n                    </Box>\n                    \n                    <Divider sx={{ my: 3 }} />\n                    \n                    {/* Individual Scores */}\n                    <Grid container spacing={4} sx={{ mt: 1 }}>\n                      <Grid item xs={12} md={4}>\n                        <ScoreCircle \n                          score={analysis.scores.carbon} \n                          label=\"Carbon Footprint\" \n                        />\n                      </Grid>\n                      <Grid item xs={12} md={4}>\n                        <ScoreCircle \n                          score={analysis.scores.water} \n                          label=\"Water Usage\" \n                        />\n                      </Grid>\n                      <Grid item xs={12} md={4}>\n                        <ScoreCircle \n                          score={analysis.scores.resources} \n                          label=\"Resource Consumption\" \n                        />\n                      </Grid>\n                    </Grid>\n                  </Box>\n                )}\n                \n                {activeTab === 1 && (\n                  <Box>\n                    <Card variant=\"outlined\" sx={{ mb: 3 }}>\n                      <CardContent>\n                        <Typography variant=\"h6\" gutterBottom>\n                          Analysis Explanation\n                        </Typography>\n                        <Typography variant=\"body1\">\n                          {analysis.explanation}\n                        </Typography>\n                      </CardContent>\n                    </Card>\n                    \n                    <Card variant=\"outlined\">\n                      <CardContent>\n                        <Typography variant=\"h6\" gutterBottom>\n                          Improvement Suggestions\n                        </Typography>\n                        <List>\n                          {analysis.suggestions.split(/\\d+\\./).filter(s => s.trim()).map((suggestion, index) => (\n                            <ListItem key={index}>\n                              <ListItemIcon>\n                                <EcoIcon color=\"primary\" />\n                              </ListItemIcon>\n                              <ListItemText primary={suggestion.trim()} />\n                            </ListItem>\n                          ))}\n                        </List>\n                      </CardContent>\n                    </Card>\n                    \n                    <Box sx={{ mt: 3, textAlign: 'right' }}>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Analysis performed: {formatDate(analysis.createdAt)}\n                      </Typography>\n                    </Box>\n                  </Box>\n                )}\n              </Box>\n            )}\n          </Paper>\n        )}\n        \n        {/* Similar Products */}\n        <Box sx={{ mt: 6, mb: 4 }}>\n          <Typography variant=\"h5\" gutterBottom>\n            Similar Products\n          </Typography>\n          <Typography variant=\"body1\" paragraph color=\"text.secondary\">\n            Compare with other products in the same category\n          </Typography>\n          \n          <Grid container spacing={3}>\n            {similarProducts.map((similarProduct, index) => {\n              const num = index + 1;\n              return (\n                <Grid item key={similarProduct.id} xs={12} sm={6} md={4}>\n                  <Paper \n                    elevation={2} \n                    sx={{ \n                      p: 2, \n                      display: 'flex', \n                      flexDirection: 'column',\n                      alignItems: 'center',\n                      cursor: 'pointer',\n                      transition: 'transform 0.3s ease, box-shadow 0.3s ease',\n                      '&:hover': {\n                        transform: 'translateY(-5px)',\n                        boxShadow: 4\n                      }\n                    }}\n                    onClick={() => navigate(`/search?category=${product.category}`)}\n                  >\n                    <img \n                      src={`https://via.placeholder.com/300x200?text=Similar+Product+${num}`}\n                      alt={similarProduct.name}\n                      style={{ width: '100%', height: 'auto', marginBottom: '12px' }} \n                      onError={(e) => {\n                        console.error(`Failed to load image for: ${similarProduct.name}`);\n                        e.target.src = generateColorfulPlaceholder(similarProduct.name);\n                      }}\n                    />\n                    <Typography variant=\"h6\" align=\"center\">\n                      {similarProduct.name}\n                    </Typography>\n                    <Chip \n                      label={similarProduct.category} \n                      size=\"small\" \n                      sx={{ mt: 1 }} \n                    />\n                    <Button\n                      variant=\"text\"\n                      color=\"primary\"\n                      startIcon={<CompareArrowsIcon />}\n                      sx={{ mt: 2 }}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        navigate(`/compare?products=${id},${similarProduct.id}`);\n                      }}\n                    >\n                      Compare\n                    </Button>\n                  </Paper>\n                </Grid>\n              );\n            })}\n          </Grid>\n        </Box>\n      </Container>\n    </Box>\n  );\n}\n\nexport default ProductDetailPage;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,SACEC,GAAG,EACHC,SAAS,EACTC,UAAU,EACVC,MAAM,EACNC,IAAI,EACJC,KAAK,EACLC,IAAI,EACJC,OAAO,EACPC,gBAAgB,EAChBC,KAAK,EACLC,IAAI,EACJC,QAAQ,EACRC,YAAY,EACZC,YAAY,EACZC,IAAI,EACJC,WAAW,EACXC,IAAI,EACJC,GAAG,EACHC,WAAW,EACXC,IAAI,IAAIC,OAAO,QACV,eAAe;AACtB,SAASD,IAAI,QAAQ,kBAAkB;AACvC,OAAOE,OAAO,MAAM,6BAA6B;AACjD,OAAOC,SAAS,MAAM,2BAA2B;AACjD,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,aAAa,MAAM,+BAA+B;AACzD,OAAOC,iBAAiB,MAAM,mCAAmC;AACjE,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,SAASC,UAAU,EAAEC,WAAW,QAAQ,iBAAiB;AACzD,OAAOC,YAAY,MAAM,mCAAmC;AAC5D,OAAOC,UAAU,MAAM,iCAAiC;AACxD,SAASC,UAAU,QAAQ,kBAAkB;;AAE7C;AACA,OAAOC,aAAa,MAAM,2CAA2C;AACrE,OAAOC,iBAAiB,MAAM,0CAA0C;AACxE,OAAOC,mBAAmB,MAAM,2CAA2C;AAC3E,OAAOC,mBAAmB,MAAM,4CAA4C;AAC5E,OAAOC,iBAAiB,MAAM,iDAAiD;AAC/E,OAAOC,qBAAqB,MAAM,2CAA2C;;AAE7E;AAAA,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AACA,MAAMC,2BAA2B,GAAIC,WAAW,IAAK;EACnD;EACA,MAAMC,QAAQ,GAAIC,GAAG,IAAK;IACxB,IAAIC,IAAI,GAAG,CAAC;IACZ,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,GAAG,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;MACnCD,IAAI,GAAGD,GAAG,CAACI,UAAU,CAACF,CAAC,CAAC,IAAI,CAACD,IAAI,IAAI,CAAC,IAAIA,IAAI,CAAC;IACjD;IACA,MAAMI,CAAC,GAAG,CAACJ,IAAI,GAAG,UAAU,EAAEK,QAAQ,CAAC,EAAE,CAAC,CAACC,WAAW,CAAC,CAAC;IACxD,OAAO,GAAG,GAAG,OAAO,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,GAAGH,CAAC,CAACF,MAAM,CAAC,GAAGE,CAAC;EACrD,CAAC;;EAED;EACA,MAAMI,aAAa,GAAIC,QAAQ,IAAK;IAClC;IACAA,QAAQ,GAAGA,QAAQ,CAACC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;;IAEpC;IACA,MAAMC,CAAC,GAAGC,QAAQ,CAACH,QAAQ,CAACI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;IAC7C,MAAMC,CAAC,GAAGF,QAAQ,CAACH,QAAQ,CAACI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;IAC7C,MAAME,CAAC,GAAGH,QAAQ,CAACH,QAAQ,CAACI,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;;IAE7C;IACA,OAAOG,IAAI,CAACC,IAAI,CACd,KAAK,IAAIN,CAAC,GAAGA,CAAC,CAAC,GACf,KAAK,IAAIG,CAAC,GAAGA,CAAC,CAAC,GACf,KAAK,IAAIC,CAAC,GAAGA,CAAC,CAChB,CAAC;EACH,CAAC;;EAED;EACA,MAAMG,KAAK,GAAGpB,QAAQ,CAACD,WAAW,CAAC;EACnC,MAAMsB,SAAS,GAAGX,aAAa,CAACU,KAAK,CAAC,GAAG,GAAG,GAAG,SAAS,GAAG,SAAS;EAEpE,MAAME,UAAU,GAAG;AACrB;AACA,6CAA6CF,KAAK;AAClD,wGAAwGC,SAAS,KAAKtB,WAAW;AACjI;AACA,GAAG;EAED,OAAO,6BAA6BwB,IAAI,CAACD,UAAU,CAAC,EAAE;AACxD,CAAC;;AAED;AACA,MAAME,eAAe,GAAIC,EAAE,IAAK;EAC9B,QAAOA,EAAE;IACP,KAAK,GAAG;MAAE,OAAOrC,aAAa;IAC9B,KAAK,GAAG;MAAE,OAAOC,iBAAiB;IAClC,KAAK,GAAG;MAAE,OAAOC,mBAAmB;IACpC,KAAK,GAAG;MAAE,OAAOC,mBAAmB;IACpC,KAAK,GAAG;MAAE,OAAOC,iBAAiB;IAClC,KAAK,GAAG;MAAE,OAAOC,qBAAqB;IACtC;MAAS,OAAO,IAAI;EACtB;AACF,CAAC;;AAED;AACA,MAAMiC,WAAW,GAAGA,CAAC;EAAEC,KAAK;EAAEC,KAAK;EAAEC,IAAI,GAAG;AAAS,CAAC,KAAK;EACzD,IAAIC,UAAU,GAAG,EAAE;EAEnB,IAAIH,KAAK,IAAI,CAAC,EAAEG,UAAU,GAAG,iBAAiB,CAAC,KAC1C,IAAIH,KAAK,IAAI,CAAC,EAAEG,UAAU,GAAG,YAAY,CAAC,KAC1C,IAAIH,KAAK,IAAI,CAAC,EAAEG,UAAU,GAAG,eAAe,CAAC,KAC7C,IAAIH,KAAK,IAAI,CAAC,EAAEG,UAAU,GAAG,YAAY,CAAC,KAC1CA,UAAU,GAAG,WAAW;EAE7B,MAAMC,UAAU,GAAGF,IAAI,KAAK,OAAO,GAAG,GAAG,GAAGA,IAAI,KAAK,QAAQ,GAAG,EAAE,GAAG,EAAE;EACvE,MAAMG,QAAQ,GAAGH,IAAI,KAAK,OAAO,GAAG,MAAM,GAAGA,IAAI,KAAK,QAAQ,GAAG,SAAS,GAAG,MAAM;EAEnF,oBACElC,OAAA,CAACzC,GAAG;IAAC+E,EAAE,EAAE;MAAEC,SAAS,EAAE;IAAS,CAAE;IAAAC,QAAA,gBAC/BxC,OAAA,CAACzC,GAAG;MACFkF,SAAS,EAAE,yBAAyBN,UAAU,EAAG;MACjDG,EAAE,EAAE;QACFI,KAAK,EAAEN,UAAU;QACjBO,MAAM,EAAEP,UAAU;QAClBC,QAAQ;QACRO,EAAE,EAAE,CAAC;QACLC,EAAE,EAAE;MACN,CAAE;MAAAL,QAAA,EAEDR;IAAK;MAAAc,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eACNjD,OAAA,CAACvC,UAAU;MAACyF,OAAO,EAAEhB,IAAI,KAAK,OAAO,GAAG,OAAO,GAAG,OAAQ;MAACiB,SAAS,EAAC,KAAK;MAAAX,QAAA,EACvEP;IAAK;MAAAa,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACV,CAAC;AAEV,CAAC;;AAED;AAAAG,EAAA,GAjCMrB,WAAW;AAkCjB,MAAMsB,kBAAkB,GAAIC,QAAQ,IAAK;EACvC,OAAO,CACL;IACExB,EAAE,EAAE,UAAU;IACdyB,IAAI,EAAE,mBAAmB;IACzBD,QAAQ,EAAEA,QAAQ;IAClBE,WAAW,EAAE,oDAAoD;IACjEC,SAAS,EAAE,CAAC,wBAAwB,EAAE,wBAAwB,CAAC;IAC/DC,qBAAqB,EAAE;EACzB,CAAC,EACD;IACE5B,EAAE,EAAE,UAAU;IACdyB,IAAI,EAAE,mBAAmB;IACzBD,QAAQ,EAAEA,QAAQ;IAClBE,WAAW,EAAE,+CAA+C;IAC5DC,SAAS,EAAE,CAAC,mBAAmB,EAAE,0BAA0B,CAAC;IAC5DC,qBAAqB,EAAE;EACzB,CAAC,EACD;IACE5B,EAAE,EAAE,UAAU;IACdyB,IAAI,EAAE,mBAAmB;IACzBD,QAAQ,EAAEA,QAAQ;IAClBE,WAAW,EAAE,yDAAyD;IACtEC,SAAS,EAAE,CAAC,oBAAoB,EAAE,oBAAoB,CAAC;IACvDC,qBAAqB,EAAE;EACzB,CAAC,CACF;AACH,CAAC;AAED,SAASC,iBAAiBA,CAAA,EAAG;EAAAC,EAAA;EAC3B,MAAM;IAAE9B;EAAG,CAAC,GAAGzE,SAAS,CAAC,CAAC;EAC1B,MAAMwG,QAAQ,GAAGvG,WAAW,CAAC,CAAC;;EAE9B;EACA,MAAM,CAACwG,OAAO,EAAEC,UAAU,CAAC,GAAG5G,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC6G,QAAQ,EAAEC,WAAW,CAAC,GAAG9G,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAAC+G,OAAO,EAAEC,UAAU,CAAC,GAAGhH,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACiH,KAAK,EAAEC,QAAQ,CAAC,GAAGlH,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACmH,SAAS,EAAEC,YAAY,CAAC,GAAGpH,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACqH,aAAa,EAAEC,gBAAgB,CAAC,GAAGtH,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACuH,SAAS,EAAEC,YAAY,CAAC,GAAGxH,QAAQ,CAAC,CAAC,CAAC;EAC7C,MAAM,CAACyH,eAAe,EAAEC,kBAAkB,CAAC,GAAG1H,QAAQ,CAAC,EAAE,CAAC;;EAE1D;EACAC,SAAS,CAAC,MAAM;IACd,MAAM0H,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnCX,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,EAAE,CAAC;MAEZ,IAAI;QACF,MAAMU,QAAQ,GAAG,MAAM3F,UAAU,CAAC4F,cAAc,CAAClD,EAAE,CAAC;QACpDiC,UAAU,CAACgB,QAAQ,CAACE,IAAI,CAAC;QACzB;QACA,IAAIF,QAAQ,CAACE,IAAI,IAAIF,QAAQ,CAACE,IAAI,CAAC3B,QAAQ,EAAE;UAC3CuB,kBAAkB,CAACxB,kBAAkB,CAAC0B,QAAQ,CAACE,IAAI,CAAC3B,QAAQ,CAAC,CAAC;QAChE;QACAa,UAAU,CAAC,KAAK,CAAC;MACnB,CAAC,CAAC,OAAOe,GAAG,EAAE;QACZC,OAAO,CAACf,KAAK,CAAC,yBAAyB,EAAEc,GAAG,CAAC;QAC7Cb,QAAQ,CAACa,GAAG,CAACE,OAAO,IAAI,mDAAmD,CAAC;QAC5EjB,UAAU,CAAC,KAAK,CAAC;;QAEjB;QACA,IAAIkB,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,IAAIF,OAAO,CAACC,GAAG,CAACE,uBAAuB,KAAK,MAAM,EAAE;UAC5F,MAAMC,WAAW,GAAG;YAClB3D,EAAE,EAAEA,EAAE;YACNyB,IAAI,EAAEzB,EAAE,KAAK,GAAG,GAAG,wBAAwB,GAAG,WAAWA,EAAE,EAAE;YAC7DwB,QAAQ,EAAE,UAAU;YACpBE,WAAW,EAAE,0FAA0F;YACvGC,SAAS,EAAE,CAAC,gBAAgB,CAAC;YAC7BiC,sBAAsB,EAAE,UAAU;YAClCC,SAAS,EAAE7D,EAAE,KAAK,GAAG,GAAGpC,iBAAiB,GAAG;UAC9C,CAAC;UAEDqE,UAAU,CAAC0B,WAAW,CAAC;UACvBZ,kBAAkB,CAACxB,kBAAkB,CAAC,UAAU,CAAC,CAAC;UAClDc,UAAU,CAAC,KAAK,CAAC;UACjBE,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;QAChB;MACF;IACF,CAAC;IAEDS,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAAChD,EAAE,CAAC,CAAC;;EAER;EACA1E,SAAS,CAAC,MAAM;IACd,MAAMwI,aAAa,GAAG,MAAAA,CAAA,KAAY;MAChC,IAAI;QACF,MAAMb,QAAQ,GAAG,MAAM1F,WAAW,CAACwG,kBAAkB,CAAC/D,EAAE,CAAC;QACzDmC,WAAW,CAACc,QAAQ,CAACE,IAAI,CAAC;MAC5B,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZ;QACAC,OAAO,CAACW,GAAG,CAAC,4BAA4B,CAAC;;QAEzC;QACA,IAAIT,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,IAAIF,OAAO,CAACC,GAAG,CAACE,uBAAuB,KAAK,MAAM,EAAE;UAC5FvB,WAAW,CAAC;YACV8B,SAAS,EAAEjE,EAAE;YACbkE,MAAM,EAAE;cACNC,OAAO,EAAE,GAAG;cACZC,MAAM,EAAE,GAAG;cACXC,KAAK,EAAE,GAAG;cACVC,SAAS,EAAE;YACb,CAAC;YACDC,WAAW,EAAE,mKAAmK;YAChLC,WAAW,EAAE,qJAAqJ;YAClKC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;UACpC,CAAC,CAAC;QACJ;MACF;IACF,CAAC;IAED,IAAI,CAACvC,OAAO,IAAIJ,OAAO,EAAE;MACvB8B,aAAa,CAAC,CAAC;IACjB;EACF,CAAC,EAAE,CAAC9D,EAAE,EAAEgC,OAAO,EAAEI,OAAO,CAAC,CAAC;;EAE1B;EACA,MAAMwC,eAAe,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;IAC3CjC,YAAY,CAACiC,QAAQ,CAAC;EACxB,CAAC;;EAED;EACA,MAAMC,oBAAoB,GAAG,MAAAA,CAAA,KAAY;IACvCtC,YAAY,CAAC,IAAI,CAAC;IAClBE,gBAAgB,CAAC,EAAE,CAAC;IAEpB,IAAI;MACF,MAAMM,QAAQ,GAAG,MAAM1F,WAAW,CAACyH,sBAAsB,CAAChF,EAAE,EAAE,IAAI,CAAC;MACnEmC,WAAW,CAACc,QAAQ,CAACE,IAAI,CAAC;MAC1BV,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC,CAAC,OAAOW,GAAG,EAAE;MACZC,OAAO,CAACf,KAAK,CAAC,0BAA0B,EAAEc,GAAG,CAAC;MAC9CT,gBAAgB,CAACS,GAAG,CAACE,OAAO,IAAI,8CAA8C,CAAC;;MAE/E;MACA,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,IAAIF,OAAO,CAACC,GAAG,CAACE,uBAAuB,KAAK,MAAM,EAAE;QAC5F;QACAuB,UAAU,CAAC,MAAM;UACf9C,WAAW,CAAC;YACV8B,SAAS,EAAEjE,EAAE;YACbkE,MAAM,EAAE;cACNC,OAAO,EAAE,GAAG;cACZC,MAAM,EAAE,GAAG;cACXC,KAAK,EAAE,GAAG;cACVC,SAAS,EAAE;YACb,CAAC;YACDC,WAAW,EAAE,mKAAmK;YAChLC,WAAW,EAAE,qJAAqJ;YAClKC,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC;UACpC,CAAC,CAAC;UACFlC,YAAY,CAAC,KAAK,CAAC;UACnBE,gBAAgB,CAAC,EAAE,CAAC,CAAC,CAAC;QACxB,CAAC,EAAE,IAAI,CAAC;MACV,CAAC,MAAM;QACLF,YAAY,CAAC,KAAK,CAAC;MACrB;IACF;EACF,CAAC;;EAED;EACA,IAAIL,OAAO,EAAE;IACX,oBAAOlE,OAAA,CAACV,YAAY;MAAC8F,OAAO,EAAC,4BAA4B;MAAC4B,QAAQ;IAAA;MAAAlE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACvE;;EAEA;EACA,IAAImB,KAAK,IAAI,CAACN,OAAO,EAAE;IACrB,oBACE9D,OAAA,CAACxC,SAAS;MAACyJ,QAAQ,EAAC,IAAI;MAAC3E,EAAE,EAAE;QAAE4E,EAAE,EAAE;MAAE,CAAE;MAAA1E,QAAA,gBACrCxC,OAAA,CAACT,UAAU;QACT6E,KAAK,EAAEA,KAAM;QACb4C,QAAQ;QACRG,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;MAAE;QAAAxE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzC,CAAC,eACFjD,OAAA,CAACzC,GAAG;QAAC+E,EAAE,EAAE;UAAEiF,EAAE,EAAE,CAAC;UAAEhF,SAAS,EAAE;QAAS,CAAE;QAAAC,QAAA,eACtCxC,OAAA,CAACtC,MAAM;UACLwF,OAAO,EAAC,WAAW;UACnBsE,SAAS,eAAExH,OAAA,CAACb,gBAAgB;YAAA2D,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UAChCwE,OAAO,EAAEA,CAAA,KAAM5D,QAAQ,CAAC,SAAS,CAAE;UAAArB,QAAA,EACpC;QAED;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG,CAAC;EAEhB;EAEA,oBACEjD,OAAA,CAACzC,GAAG;IAACkF,SAAS,EAAC,iBAAiB;IAAAD,QAAA,eAC9BxC,OAAA,CAACxC,SAAS;MAACyJ,QAAQ,EAAC,IAAI;MAAC3E,EAAE,EAAE;QAAE4E,EAAE,EAAE;MAAE,CAAE;MAAA1E,QAAA,gBAErCxC,OAAA,CAACvB,WAAW;QACViJ,SAAS,eAAE1H,OAAA,CAACb,gBAAgB;UAACkD,QAAQ,EAAC;QAAO;UAAAS,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAE;QACjD,cAAW,YAAY;QACvBX,EAAE,EAAE;UAAEM,EAAE,EAAE;QAAE,CAAE;QAAAJ,QAAA,gBAEdxC,OAAA,CAACrB,OAAO;UAACwE,SAAS,EAAEzE,IAAK;UAACiJ,EAAE,EAAC,GAAG;UAAClG,KAAK,EAAC,SAAS;UAAAe,QAAA,EAAC;QAEjD;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC,eACVjD,OAAA,CAACrB,OAAO;UAACwE,SAAS,EAAEzE,IAAK;UAACiJ,EAAE,EAAC,SAAS;UAAClG,KAAK,EAAC,SAAS;UAAAe,QAAA,EAAC;QAEvD;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAS,CAAC,eACVjD,OAAA,CAACrB,OAAO;UAACwE,SAAS,EAAEzE,IAAK;UAACiJ,EAAE,EAAE,oBAAoB7D,OAAO,CAACR,QAAQ,EAAG;UAAC7B,KAAK,EAAC,SAAS;UAAAe,QAAA,EAClFsB,OAAO,CAACR;QAAQ;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,eACVjD,OAAA,CAACvC,UAAU;UAACgE,KAAK,EAAC,cAAc;UAAAe,QAAA,EAAEsB,OAAO,CAACP;QAAI;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAa,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjD,CAAC,eAGdjD,OAAA,CAACrC,IAAI;QAACiK,SAAS;QAACC,OAAO,EAAE,CAAE;QAAArF,QAAA,gBAEzBxC,OAAA,CAACrC,IAAI;UAACmK,IAAI;UAACC,EAAE,EAAE,EAAG;UAACC,EAAE,EAAE,CAAE;UAAAxF,QAAA,eACvBxC,OAAA,CAACpC,KAAK;YACJqK,SAAS,EAAE,CAAE;YACb3F,EAAE,EAAE;cACFK,MAAM,EAAE,MAAM;cACduF,OAAO,EAAE,MAAM;cACfC,cAAc,EAAE,QAAQ;cACxBC,UAAU,EAAE,QAAQ;cACpBC,QAAQ,EAAE,QAAQ;cAClBC,YAAY,EAAE;YAChB,CAAE;YAAA9F,QAAA,eAEFxC,OAAA;cACEuI,GAAG,EAAE1G,eAAe,CAACC,EAAE,CAAC,IAAIgC,OAAO,CAAC6B,SAAU;cAC9C6C,GAAG,EAAE1E,OAAO,CAACP,IAAK;cAClBkF,KAAK,EAAE;gBAAE/F,KAAK,EAAE,MAAM;gBAAEC,MAAM,EAAE;cAAO,CAAE;cACzC+F,OAAO,EAAGC,CAAC,IAAK;gBACdxD,OAAO,CAACf,KAAK,CAAC,6BAA6BN,OAAO,CAACP,IAAI,EAAE,CAAC;gBAC1DoF,CAAC,CAACC,MAAM,CAACL,GAAG,GAAGpI,2BAA2B,CAAC2D,OAAO,CAACP,IAAI,CAAC;cAC1D;YAAE;cAAAT,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eAGPjD,OAAA,CAACrC,IAAI;UAACmK,IAAI;UAACC,EAAE,EAAE,EAAG;UAACC,EAAE,EAAE,CAAE;UAAAxF,QAAA,gBACvBxC,OAAA,CAACvC,UAAU;YAACyF,OAAO,EAAC,IAAI;YAACC,SAAS,EAAC,IAAI;YAAC0F,YAAY;YAAArG,QAAA,EACjDsB,OAAO,CAACP;UAAI;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eAEbjD,OAAA,CAACzC,GAAG;YAAC+E,EAAE,EAAE;cAAE4F,OAAO,EAAE,MAAM;cAAEE,UAAU,EAAE,QAAQ;cAAExF,EAAE,EAAE;YAAE,CAAE;YAAAJ,QAAA,gBACxDxC,OAAA,CAAClB,YAAY;cAACwD,EAAE,EAAE;gBAAEb,KAAK,EAAE,cAAc;gBAAEqH,EAAE,EAAE;cAAE;YAAE;cAAAhG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACtDjD,OAAA,CAACnC,IAAI;cAACoE,KAAK,EAAE6B,OAAO,CAACR,QAAS;cAACpB,IAAI,EAAC;YAAQ;cAAAY,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5C,CAAC,eAENjD,OAAA,CAACzC,GAAG;YAAC+E,EAAE,EAAE;cAAE4F,OAAO,EAAE,MAAM;cAAEE,UAAU,EAAE,QAAQ;cAAExF,EAAE,EAAE;YAAE,CAAE;YAAAJ,QAAA,gBACxDxC,OAAA,CAACnB,SAAS;cAACyD,EAAE,EAAE;gBAAEb,KAAK,EAAE,cAAc;gBAAEqH,EAAE,EAAE;cAAE;YAAE;cAAAhG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACnDjD,OAAA,CAACvC,UAAU;cAACyF,OAAO,EAAC,OAAO;cAAAV,QAAA,GAAC,UAClB,EAACsB,OAAO,CAAC4B,sBAAsB,IAAI5B,OAAO,CAACJ,qBAAqB,IAAI,eAAe;YAAA;cAAAZ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjF,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CAAC,eAENjD,OAAA,CAACvC,UAAU;YAACyF,OAAO,EAAC,IAAI;YAAC2F,YAAY;YAAArG,QAAA,EAAC;UAEtC;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACbjD,OAAA,CAACvC,UAAU;YAACyF,OAAO,EAAC,OAAO;YAAC6F,SAAS;YAAAvG,QAAA,EAClCsB,OAAO,CAACN;UAAW;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CAAC,eAEbjD,OAAA,CAACvC,UAAU;YAACyF,OAAO,EAAC,IAAI;YAAC2F,YAAY;YAAArG,QAAA,EAAC;UAEtC;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACbjD,OAAA,CAACzC,GAAG;YAAC+E,EAAE,EAAE;cAAE4F,OAAO,EAAE,MAAM;cAAEc,QAAQ,EAAE,MAAM;cAAEC,GAAG,EAAE,CAAC;cAAErG,EAAE,EAAE;YAAE,CAAE;YAAAJ,QAAA,EAC3D,CAACsB,OAAO,CAACL,SAAS,IAAI,EAAE,EAAEyF,GAAG,CAAC,CAACC,QAAQ,EAAEC,KAAK,kBAC7CpJ,OAAA,CAACnC,IAAI;cAEHoE,KAAK,EAAEkH,QAAS;cAChBjH,IAAI,EAAC,OAAO;cACZgB,OAAO,EAAC,UAAU;cAClBmG,IAAI,eAAErJ,OAAA,CAACjB,gBAAgB;gBAAA+D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAE,GAJtBmG,KAAK;cAAAtG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAKX,CACF;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,EAELa,OAAO,CAACwF,kBAAkB,iBACzBtJ,OAAA,CAAAE,SAAA;YAAAsC,QAAA,gBACExC,OAAA,CAACvC,UAAU;cAACyF,OAAO,EAAC,IAAI;cAAC2F,YAAY;cAAArG,QAAA,EAAC;YAEtC;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACbjD,OAAA,CAACvC,UAAU;cAACyF,OAAO,EAAC,OAAO;cAAC6F,SAAS;cAAAvG,QAAA,EAClCsB,OAAO,CAACwF;YAAkB;cAAAxG,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjB,CAAC;UAAA,eACb,CACH,eAEDjD,OAAA,CAACzC,GAAG;YAAC+E,EAAE,EAAE;cAAE4F,OAAO,EAAE,MAAM;cAAEe,GAAG,EAAE,CAAC;cAAE1B,EAAE,EAAE;YAAE,CAAE;YAAA/E,QAAA,gBAC1CxC,OAAA,CAACtC,MAAM;cACLwF,OAAO,EAAC,WAAW;cACnBzB,KAAK,EAAC,SAAS;cACf+F,SAAS,eAAExH,OAAA,CAAChB,aAAa;gBAAA8D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAE;cAC7BwE,OAAO,EAAEZ,oBAAqB;cAC9B0C,QAAQ,EAAEjF,SAAU;cAAA9B,QAAA,EAEnB8B,SAAS,GAAG,cAAc,GAAGN,QAAQ,GAAG,YAAY,GAAG;YAAgB;cAAAlB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAClE,CAAC,eACTjD,OAAA,CAACtC,MAAM;cACLwF,OAAO,EAAC,UAAU;cAClBsE,SAAS,eAAExH,OAAA,CAACf,iBAAiB;gBAAA6D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAE;cACjCwE,OAAO,EAAEA,CAAA,KAAM5D,QAAQ,CAAC,qBAAqB/B,EAAE,EAAE,CAAE;cAAAU,QAAA,EACpD;YAED;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTjD,OAAA,CAACtC,MAAM;cACLwF,OAAO,EAAC,UAAU;cAClBzB,KAAK,EAAC,WAAW;cACjBgG,OAAO,EAAEA,CAAA,KAAM5D,QAAQ,CAAC,aAAa/B,EAAE,OAAO,CAAE;cAAAU,QAAA,EACjD;YAED;cAAAM,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,EAELuB,aAAa,iBACZxE,OAAA,CAAChC,KAAK;YAACwL,QAAQ,EAAC,OAAO;YAAClH,EAAE,EAAE;cAAEiF,EAAE,EAAE;YAAE,CAAE;YAAA/E,QAAA,EACnCgC;UAAa;YAAA1B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CACR;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAGN,CAACe,QAAQ,IAAIM,SAAS,kBACrBtE,OAAA,CAACpC,KAAK;QAACqK,SAAS,EAAE,CAAE;QAAC3F,EAAE,EAAE;UAAEiF,EAAE,EAAE,CAAC;UAAE3E,EAAE,EAAE,CAAC;UAAE0F,YAAY,EAAE,CAAC;UAAED,QAAQ,EAAE;QAAS,CAAE;QAAA7F,QAAA,gBAC7ExC,OAAA,CAACzC,GAAG;UAAC+E,EAAE,EAAE;YAAEmH,EAAE,EAAE,CAAC;YAAEvC,EAAE,EAAE,CAAC;YAAEwC,eAAe,EAAE,cAAc;YAAEjI,KAAK,EAAE;UAAQ,CAAE;UAAAe,QAAA,eACzExC,OAAA,CAACvC,UAAU;YAACyF,OAAO,EAAC,IAAI;YAAAV,QAAA,EAAC;UAEzB;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,EAELqB,SAAS,gBACRtE,OAAA,CAACzC,GAAG;UAAC+E,EAAE,EAAE;YAAEqH,CAAC,EAAE,CAAC;YAAEpH,SAAS,EAAE;UAAS,CAAE;UAAAC,QAAA,gBACrCxC,OAAA,CAACjC,gBAAgB;YAACmE,IAAI,EAAE;UAAG;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC9BjD,OAAA,CAACvC,UAAU;YAACyF,OAAO,EAAC,IAAI;YAACZ,EAAE,EAAE;cAAEiF,EAAE,EAAE;YAAE,CAAE;YAAA/E,QAAA,EAAC;UAExC;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACbjD,OAAA,CAACvC,UAAU;YAACyF,OAAO,EAAC,OAAO;YAACzB,KAAK,EAAC,gBAAgB;YAACa,EAAE,EAAE;cAAEiF,EAAE,EAAE;YAAE,CAAE;YAAA/E,QAAA,EAAC;UAElE;YAAAM,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACV,CAAC,gBAENjD,OAAA,CAACzC,GAAG;UAAC+E,EAAE,EAAE;YAAEqH,CAAC,EAAE;UAAE,CAAE;UAAAnH,QAAA,gBAChBxC,OAAA,CAACzB,IAAI;YACHqL,KAAK,EAAElF,SAAU;YACjBmF,QAAQ,EAAEnD,eAAgB;YAC1BoD,QAAQ;YACRxH,EAAE,EAAE;cAAEM,EAAE,EAAE;YAAE,CAAE;YAAAJ,QAAA,gBAEdxC,OAAA,CAACxB,GAAG;cAAC6K,IAAI,eAAErJ,OAAA,CAAChB,aAAa;gBAAA8D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAE;cAAChB,KAAK,EAAC;YAAQ;cAAAa,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAC/CjD,OAAA,CAACxB,GAAG;cAAC6K,IAAI,eAAErJ,OAAA,CAACd,QAAQ;gBAAA4D,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAE;cAAChB,KAAK,EAAC;YAAS;cAAAa,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACvC,CAAC,EAENyB,SAAS,KAAK,CAAC,iBACd1E,OAAA,CAACzC,GAAG;YAAAiF,QAAA,gBAEFxC,OAAA,CAACzC,GAAG;cAAC+E,EAAE,EAAE;gBAAEC,SAAS,EAAE,QAAQ;gBAAEK,EAAE,EAAE;cAAE,CAAE;cAAAJ,QAAA,gBACtCxC,OAAA,CAACvC,UAAU;gBAACyF,OAAO,EAAC,IAAI;gBAAC2F,YAAY;gBAAArG,QAAA,EAAC;cAEtC;gBAAAM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAY,CAAC,eACbjD,OAAA,CAAC+B,WAAW;gBACVC,KAAK,EAAEgC,QAAQ,CAACgC,MAAM,CAACC,OAAQ;gBAC/BhE,KAAK,EAAC,SAAS;gBACfC,IAAI,EAAC;cAAO;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACb,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,eAENjD,OAAA,CAAClC,OAAO;cAACwE,EAAE,EAAE;gBAAEyH,EAAE,EAAE;cAAE;YAAE;cAAAjH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAG1BjD,OAAA,CAACrC,IAAI;cAACiK,SAAS;cAACC,OAAO,EAAE,CAAE;cAACvF,EAAE,EAAE;gBAAEiF,EAAE,EAAE;cAAE,CAAE;cAAA/E,QAAA,gBACxCxC,OAAA,CAACrC,IAAI;gBAACmK,IAAI;gBAACC,EAAE,EAAE,EAAG;gBAACC,EAAE,EAAE,CAAE;gBAAAxF,QAAA,eACvBxC,OAAA,CAAC+B,WAAW;kBACVC,KAAK,EAAEgC,QAAQ,CAACgC,MAAM,CAACE,MAAO;kBAC9BjE,KAAK,EAAC;gBAAkB;kBAAAa,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACzB;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACPjD,OAAA,CAACrC,IAAI;gBAACmK,IAAI;gBAACC,EAAE,EAAE,EAAG;gBAACC,EAAE,EAAE,CAAE;gBAAAxF,QAAA,eACvBxC,OAAA,CAAC+B,WAAW;kBACVC,KAAK,EAAEgC,QAAQ,CAACgC,MAAM,CAACG,KAAM;kBAC7BlE,KAAK,EAAC;gBAAa;kBAAAa,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpB;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC,eACPjD,OAAA,CAACrC,IAAI;gBAACmK,IAAI;gBAACC,EAAE,EAAE,EAAG;gBAACC,EAAE,EAAE,CAAE;gBAAAxF,QAAA,eACvBxC,OAAA,CAAC+B,WAAW;kBACVC,KAAK,EAAEgC,QAAQ,CAACgC,MAAM,CAACI,SAAU;kBACjCnE,KAAK,EAAC;gBAAsB;kBAAAa,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC7B;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACE,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CACN,EAEAyB,SAAS,KAAK,CAAC,iBACd1E,OAAA,CAACzC,GAAG;YAAAiF,QAAA,gBACFxC,OAAA,CAAC3B,IAAI;cAAC6E,OAAO,EAAC,UAAU;cAACZ,EAAE,EAAE;gBAAEM,EAAE,EAAE;cAAE,CAAE;cAAAJ,QAAA,eACrCxC,OAAA,CAAC1B,WAAW;gBAAAkE,QAAA,gBACVxC,OAAA,CAACvC,UAAU;kBAACyF,OAAO,EAAC,IAAI;kBAAC2F,YAAY;kBAAArG,QAAA,EAAC;gBAEtC;kBAAAM,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACbjD,OAAA,CAACvC,UAAU;kBAACyF,OAAO,EAAC,OAAO;kBAAAV,QAAA,EACxBwB,QAAQ,CAACqC;gBAAW;kBAAAvD,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACX,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACF;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eAEPjD,OAAA,CAAC3B,IAAI;cAAC6E,OAAO,EAAC,UAAU;cAAAV,QAAA,eACtBxC,OAAA,CAAC1B,WAAW;gBAAAkE,QAAA,gBACVxC,OAAA,CAACvC,UAAU;kBAACyF,OAAO,EAAC,IAAI;kBAAC2F,YAAY;kBAAArG,QAAA,EAAC;gBAEtC;kBAAAM,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY,CAAC,eACbjD,OAAA,CAAC/B,IAAI;kBAAAuE,QAAA,EACFwB,QAAQ,CAACsC,WAAW,CAAC0D,KAAK,CAAC,OAAO,CAAC,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACjB,GAAG,CAAC,CAACkB,UAAU,EAAEhB,KAAK,kBAC/EpJ,OAAA,CAAC9B,QAAQ;oBAAAsE,QAAA,gBACPxC,OAAA,CAAC7B,YAAY;sBAAAqE,QAAA,eACXxC,OAAA,CAACpB,OAAO;wBAAC6C,KAAK,EAAC;sBAAS;wBAAAqB,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACf,CAAC,eACfjD,OAAA,CAAC5B,YAAY;sBAACiM,OAAO,EAAED,UAAU,CAACD,IAAI,CAAC;oBAAE;sBAAArH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC;kBAAA,GAJ/BmG,KAAK;oBAAAtG,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAKV,CACX;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACE,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC,eAEPjD,OAAA,CAACzC,GAAG;cAAC+E,EAAE,EAAE;gBAAEiF,EAAE,EAAE,CAAC;gBAAEhF,SAAS,EAAE;cAAQ,CAAE;cAAAC,QAAA,eACrCxC,OAAA,CAACvC,UAAU;gBAACyF,OAAO,EAAC,OAAO;gBAACzB,KAAK,EAAC,gBAAgB;gBAAAe,QAAA,GAAC,sBAC7B,EAAChD,UAAU,CAACwE,QAAQ,CAACuC,SAAS,CAAC;cAAA;gBAAAzD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACzC;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CACN;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CACR,eAGDjD,OAAA,CAACzC,GAAG;QAAC+E,EAAE,EAAE;UAAEiF,EAAE,EAAE,CAAC;UAAE3E,EAAE,EAAE;QAAE,CAAE;QAAAJ,QAAA,gBACxBxC,OAAA,CAACvC,UAAU;UAACyF,OAAO,EAAC,IAAI;UAAC2F,YAAY;UAAArG,QAAA,EAAC;QAEtC;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eACbjD,OAAA,CAACvC,UAAU;UAACyF,OAAO,EAAC,OAAO;UAAC6F,SAAS;UAACtH,KAAK,EAAC,gBAAgB;UAAAe,QAAA,EAAC;QAE7D;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAEbjD,OAAA,CAACrC,IAAI;UAACiK,SAAS;UAACC,OAAO,EAAE,CAAE;UAAArF,QAAA,EACxBoC,eAAe,CAACsE,GAAG,CAAC,CAACoB,cAAc,EAAElB,KAAK,KAAK;YAC9C,MAAMmB,GAAG,GAAGnB,KAAK,GAAG,CAAC;YACrB,oBACEpJ,OAAA,CAACrC,IAAI;cAACmK,IAAI;cAAyBC,EAAE,EAAE,EAAG;cAACyC,EAAE,EAAE,CAAE;cAACxC,EAAE,EAAE,CAAE;cAAAxF,QAAA,eACtDxC,OAAA,CAACpC,KAAK;gBACJqK,SAAS,EAAE,CAAE;gBACb3F,EAAE,EAAE;kBACFqH,CAAC,EAAE,CAAC;kBACJzB,OAAO,EAAE,MAAM;kBACfuC,aAAa,EAAE,QAAQ;kBACvBrC,UAAU,EAAE,QAAQ;kBACpBsC,MAAM,EAAE,SAAS;kBACjBC,UAAU,EAAE,2CAA2C;kBACvD,SAAS,EAAE;oBACTC,SAAS,EAAE,kBAAkB;oBAC7BC,SAAS,EAAE;kBACb;gBACF,CAAE;gBACFpD,OAAO,EAAEA,CAAA,KAAM5D,QAAQ,CAAC,oBAAoBC,OAAO,CAACR,QAAQ,EAAE,CAAE;gBAAAd,QAAA,gBAEhExC,OAAA;kBACEuI,GAAG,EAAE,4DAA4DgC,GAAG,EAAG;kBACvE/B,GAAG,EAAE8B,cAAc,CAAC/G,IAAK;kBACzBkF,KAAK,EAAE;oBAAE/F,KAAK,EAAE,MAAM;oBAAEC,MAAM,EAAE,MAAM;oBAAEmI,YAAY,EAAE;kBAAO,CAAE;kBAC/DpC,OAAO,EAAGC,CAAC,IAAK;oBACdxD,OAAO,CAACf,KAAK,CAAC,6BAA6BkG,cAAc,CAAC/G,IAAI,EAAE,CAAC;oBACjEoF,CAAC,CAACC,MAAM,CAACL,GAAG,GAAGpI,2BAA2B,CAACmK,cAAc,CAAC/G,IAAI,CAAC;kBACjE;gBAAE;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACFjD,OAAA,CAACvC,UAAU;kBAACyF,OAAO,EAAC,IAAI;kBAAC6H,KAAK,EAAC,QAAQ;kBAAAvI,QAAA,EACpC8H,cAAc,CAAC/G;gBAAI;kBAAAT,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACV,CAAC,eACbjD,OAAA,CAACnC,IAAI;kBACHoE,KAAK,EAAEqI,cAAc,CAAChH,QAAS;kBAC/BpB,IAAI,EAAC,OAAO;kBACZI,EAAE,EAAE;oBAAEiF,EAAE,EAAE;kBAAE;gBAAE;kBAAAzE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACf,CAAC,eACFjD,OAAA,CAACtC,MAAM;kBACLwF,OAAO,EAAC,MAAM;kBACdzB,KAAK,EAAC,SAAS;kBACf+F,SAAS,eAAExH,OAAA,CAACf,iBAAiB;oBAAA6D,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAE;kBACjCX,EAAE,EAAE;oBAAEiF,EAAE,EAAE;kBAAE,CAAE;kBACdE,OAAO,EAAGkB,CAAC,IAAK;oBACdA,CAAC,CAACqC,eAAe,CAAC,CAAC;oBACnBnH,QAAQ,CAAC,qBAAqB/B,EAAE,IAAIwI,cAAc,CAACxI,EAAE,EAAE,CAAC;kBAC1D,CAAE;kBAAAU,QAAA,EACH;gBAED;kBAAAM,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACJ;YAAC,GA9CMqH,cAAc,CAACxI,EAAE;cAAAgB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OA+C3B,CAAC;UAEX,CAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACG;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACT,CAAC;AAEV;AAACW,EAAA,CA1dQD,iBAAiB;EAAA,QACTtG,SAAS,EACPC,WAAW;AAAA;AAAA2N,GAAA,GAFrBtH,iBAAiB;AA4d1B,eAAeA,iBAAiB;AAAC,IAAAP,EAAA,EAAA6H,GAAA;AAAAC,YAAA,CAAA9H,EAAA;AAAA8H,YAAA,CAAAD,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}